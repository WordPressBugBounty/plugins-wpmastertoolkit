!function(){"use strict";document.addEventListener("DOMContentLoaded",(()=>{if("undefined"!=typeof Dropzone&&(Dropzone.options.fileUploader={chunking:!0,chunkSize:WPMastertoolkit_FileManager.chunkSize,forceChunking:!0,retryChunks:!0,retryChunksLimit:3,parallelUploads:1,parallelChunkUploads:!1,timeout:12e4,maxFilesize:WPMastertoolkit_FileManager.maxFilesize,acceptedFiles:WPMastertoolkit_FileManager.acceptedFiles,init:function(){this.on("sending",(function(e,t,o){let n=e.fullPath?e.fullPath:e.name;document.getElementById("fullpath").value=n,t.ontimeout=function(){c(WPMastertoolkit_submenu_ace.i10n.errTimeout)}})).on("success",(function(e){let t=JSON.parse(e.xhr.response);"error"==t.status&&c(t.info)})).on("error",(function(e,t){c(t)}))}}),"undefined"!=typeof hljs&&hljs.highlightAll(),"undefined"!=typeof ace){const e=document.querySelector(".js-ace-toolbar"),t=document.querySelector("select#js-ace-mode"),o=document.querySelector("select#js-ace-theme"),n=document.querySelector("select#js-ace-fontSize"),a=document.querySelector("#js-ace-save"),i=ace.edit("editor"),s={aceTheme:{bright:{chrome:"Chrome",clouds:"Clouds",crimson_editor:"Crimson Editor",dawn:"Dawn",dreamweaver:"Dreamweaver",eclipse:"Eclipse",github:"GitHub",iplastic:"IPlastic",solarized_light:"Solarized Light",textmate:"TextMate",tomorrow:"Tomorrow",xcode:"XCode",kuroir:"Kuroir",katzenmilch:"KatzenMilch",sqlserver:"SQL Server"},dark:{ambiance:"Ambiance",chaos:"Chaos",clouds_midnight:"Clouds Midnight",dracula:"Dracula",cobalt:"Cobalt",gruvbox:"Gruvbox",gob:"Green on Black",idle_fingers:"idle Fingers",kr_theme:"krTheme",merbivore:"Merbivore",merbivore_soft:"Merbivore Soft",mono_industrial:"Mono Industrial",monokai:"Monokai",pastel_on_dark:"Pastel on dark",solarized_dark:"Solarized Dark",terminal:"Terminal",tomorrow_night:"Tomorrow Night",tomorrow_night_blue:"Tomorrow Night Blue",tomorrow_night_bright:"Tomorrow Night Bright",tomorrow_night_eighties:"Tomorrow Night 80s",twilight:"Twilight",vibrant_ink:"Vibrant Ink"}},aceMode:{javascript:"JavaScript",abap:"ABAP",abc:"ABC",actionscript:"ActionScript",ada:"ADA",apache_conf:"Apache Conf",asciidoc:"AsciiDoc",asl:"ASL",assembly_x86:"Assembly x86",autohotkey:"AutoHotKey",apex:"Apex",batchfile:"BatchFile",bro:"Bro",c_cpp:"C and C++",c9search:"C9Search",cirru:"Cirru",clojure:"Clojure",cobol:"Cobol",coffee:"CoffeeScript",coldfusion:"ColdFusion",csharp:"C#",csound_document:"Csound Document",csound_orchestra:"Csound",csound_score:"Csound Score",css:"CSS",curly:"Curly",d:"D",dart:"Dart",diff:"Diff",dockerfile:"Dockerfile",dot:"Dot",drools:"Drools",edifact:"Edifact",eiffel:"Eiffel",ejs:"EJS",elixir:"Elixir",elm:"Elm",erlang:"Erlang",forth:"Forth",fortran:"Fortran",fsharp:"FSharp",fsl:"FSL",ftl:"FreeMarker",gcode:"Gcode",gherkin:"Gherkin",gitignore:"Gitignore",glsl:"Glsl",gobstones:"Gobstones",golang:"Go",graphqlschema:"GraphQLSchema",groovy:"Groovy",haml:"HAML",handlebars:"Handlebars",haskell:"Haskell",haskell_cabal:"Haskell Cabal",haxe:"haXe",hjson:"Hjson",html:"HTML",html_elixir:"HTML (Elixir)",html_ruby:"HTML (Ruby)",ini:"INI",io:"Io",jack:"Jack",jade:"Jade",java:"Java",json:"JSON",jsoniq:"JSONiq",jsp:"JSP",jssm:"JSSM",jsx:"JSX",julia:"Julia",kotlin:"Kotlin",latex:"LaTeX",less:"LESS",liquid:"Liquid",lisp:"Lisp",livescript:"LiveScript",logiql:"LogiQL",lsl:"LSL",lua:"Lua",luapage:"LuaPage",lucene:"Lucene",makefile:"Makefile",markdown:"Markdown",mask:"Mask",matlab:"MATLAB",maze:"Maze",mel:"MEL",mixal:"MIXAL",mushcode:"MUSHCode",mysql:"MySQL",nix:"Nix",nsis:"NSIS",objectivec:"Objective-C",ocaml:"OCaml",pascal:"Pascal",perl:"Perl",perl6:"Perl 6",pgsql:"pgSQL",php_laravel_blade:"PHP (Blade Template)",php:"PHP",puppet:"Puppet",pig:"Pig",powershell:"Powershell",praat:"Praat",prolog:"Prolog",properties:"Properties",protobuf:"Protobuf",python:"Python",r:"R",razor:"Razor",rdoc:"RDoc",red:"Red",rhtml:"RHTML",rst:"RST",ruby:"Ruby",rust:"Rust",sass:"SASS",scad:"SCAD",scala:"Scala",scheme:"Scheme",scss:"SCSS",sh:"SH",sjs:"SJS",slim:"Slim",smarty:"Smarty",snippets:"snippets",soy_template:"Soy Template",space:"Space",sql:"SQL",sqlserver:"SQLServer",stylus:"Stylus",svg:"SVG",swift:"Swift",tcl:"Tcl",terraform:"Terraform",tex:"Tex",text:"Text",textile:"Textile",toml:"Toml",tsx:"TSX",twig:"Twig",typescript:"Typescript",vala:"Vala",vbscript:"VBScript",velocity:"Velocity",verilog:"Verilog",vhdl:"VHDL",visualforce:"Visualforce",wollok:"Wollok",xml:"XML",xquery:"XQuery",yaml:"YAML",django:"Django"},fontSize:{8:8,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,20:20,22:22,24:24,26:26,30:30}};if(i.getSession().setMode({path:"ace/mode/"+WPMastertoolkit_submenu_ace.ext,inline:!0}),i.setShowPrintMargin(!1),i.commands.addCommands([{name:"save",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:function(e){l(e)}}]),i.setOptions({maxLines:1/0}),s&&s.aceMode&&(t.innerHTML=r("ace/mode/",s.aceMode)),s&&s.aceTheme){const e=r("ace/theme/",s.aceTheme.bright),t=r("ace/theme/",s.aceTheme.dark);o.innerHTML='<optgroup label="'+WPMastertoolkit_submenu_ace.i10n.bright+'">'+e+'</optgroup><optgroup label="'+WPMastertoolkit_submenu_ace.i10n.dark+'">'+t+"</optgroup>"}s&&s.fontSize&&(n.innerHTML=r("",s.fontSize)),t.value=i.getSession().$modeId,o.value=i.getTheme(),n.value=12,e&&e.addEventListener("click",(function(e){const t=e.target.closest("button");if(t){e.preventDefault();const o=t.getAttribute("data-cmd"),n=t.getAttribute("data-option");if(o&&"none"!=o)!function(e,t){e.commands.exec(t,e)}(i,o);else if(n)if("fullscreen"==n)(void 0!==document.fullScreenElement&&null===document.fullScreenElement||void 0!==document.msFullscreenElement&&null===document.msFullscreenElement||void 0!==document.mozFullScreen&&!document.mozFullScreen||void 0!==document.webkitIsFullScreen&&!document.webkitIsFullScreen)&&(i.container.requestFullScreen?i.container.requestFullScreen():i.container.mozRequestFullScreen?i.container.mozRequestFullScreen():i.container.webkitRequestFullScreen?i.container.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):i.container.msRequestFullscreen&&i.container.msRequestFullscreen());else if("wrap"==n){let e=!i.getSession().getUseWrapMode();i.getSession().setUseWrapMode(e)}}})),t&&t.addEventListener("change",(function(e){e.preventDefault(),i.getSession().setMode(e.currentTarget.value)})),o&&o.addEventListener("change",(function(e){e.preventDefault(),i.setTheme(e.currentTarget.value)})),n&&n.addEventListener("change",(function(e){e.preventDefault(),i.setFontSize(parseInt(e.currentTarget.value))})),a&&a.addEventListener("click",(function(e){e.preventDefault(),l(i)})),n.dispatchEvent(new Event("change"))}const e=$("#main-table").find("th").length,t=e&&7==e?[0,4,5,6]:5==e?[0,4]:[3],o=$("#main-table").DataTable({paging:!1,info:!1,order:[],columnDefs:[{targets:t,orderable:!1}]});var n;function a(){const e=$("input#advanced-search").val(),t=$("ul#search-wrapper"),o=$("#js-search-modal").attr("href"),n=$("div.lds-facebook");let a="";if(e&&e.length>2&&o){var r={ajax:!0,content:e,path:o,type:"search",token:WPMastertoolkit_FileManager.nonce};$.ajax({type:"POST",url:window.location,data:r,beforeSend:function(){t.html(""),n.addClass("show-me")},success:function(e){n.removeClass("show-me"),(e=JSON.parse(e))&&e.length?(a=function(e){var t="";return $.each(e,(function(e,o){t+=`<li><a href="?p=${o.path}&view=${o.name}">${o.path}/${o.name}</a></li>`})),t}(e),t.html(a)):t.html('<p class="m-2">'+WPMastertoolkit_FileManager.i10n.noResults+"<p>")},error:function(e){n.removeClass("show-me"),t.html('<p class="m-2">'+WPMastertoolkit_FileManager.i10n.errTrylater+"</p>")},failure:function(e){n.removeClass("show-me"),t.html('<p class="m-2">'+WPMastertoolkit_FileManager.i10n.errTrylater+"</p>")}})}else t.html(WPMastertoolkit_FileManager.i10n.oops)}function r(e,t){let o="";for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o+="<option value='"+e+n+"'>"+t[n]+"</option>");return o}$("#search-addon").on("keyup",(function(){o.search(this.value).draw()})),$("input#advanced-search").on("keyup",(function(e){13===e.keyCode&&a()})),$("#search-addon3").on("click",(function(){a()})),(n=jQuery).previewImage=function(e){var t=n(document),o=".previewImage",a=n.extend({xOffset:20,yOffset:-20,fadeIn:"fast",css:{padding:"5px",border:"1px solid #cccccc","background-color":"#fff"},eventSelector:"[data-preview-image]",dataKey:"previewImage",overlayId:"preview-image-plugin-overlay"},e);return t.off(o),t.on("mouseover"+o,a.eventSelector,(function(e){n("p#"+a.overlayId).remove();var t=n("<p>").attr("id",a.overlayId).css("position","absolute").css("display","none").append(n('<img class="c-preview-img">').attr("src",n(this).data(a.dataKey)));a.css&&t.css(a.css),n("body").append(t),t.css("top",e.pageY+a.yOffset+"px").css("left",e.pageX+a.xOffset+"px").fadeIn(a.fadeIn)})),t.on("mouseout"+o,a.eventSelector,(function(){n("#"+a.overlayId).remove()})),t.on("mousemove"+o,a.eventSelector,(function(e){n("#"+a.overlayId).css("top",e.pageY+a.yOffset+"px").css("left",e.pageX+a.xOffset+"px")})),this},n.previewImage();const l=e=>{var t=e.getSession().getValue();if(null!=t){var o={ajax:!0,content:t,type:"save",token:WPMastertoolkit_FileManager.nonce};$.ajax({type:"POST",url:window.location,data:o,success:function(e){c(WPMastertoolkit_submenu_ace.i10n.saved),window.onbeforeunload=function(){}},failure:function(e){c(WPMastertoolkit_submenu_ace.i10n.errTry)},error:function(e){c(`<p style="background-color:red">${e.responseText}</p>`)}})}},i=(e,t)=>{for(let o=e.length-1;o>=0;o--)e[o].checked="boolean"==typeof t?t:!e[o].checked},s=()=>{let e=[];for(let t=document.getElementsByName("file[]"),o=t.length-1;o>=0;o--)(t[o].type="checkbox")&&e.push(t[o]);return e};function c(e){let t=document.getElementById("snackbar");t.innerHTML=e,t.className="show",setTimeout((function(){t.className=t.className.replace("show","")}),3e3)}window.select_all=function(){i(s(),!0)},window.unselect_all=function(){i(s(),!1)},window.invert_all=function(){i(s())},window.confirmDailog=(e,t=0,o="Action",n="",a=null)=>{e.preventDefault();const r={id:t,title:o,content:decodeURIComponent(n.replace(/\+/g," ")),action:a};let l=$("#js-tpl-confirm").html();return $(".modal.confirmDailog").remove(),$("body").append(((e,t)=>{let o,n=/<\%([^\%>]+)?\%>/g,a=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,r="var r=[];\n",l=0;for(var i=function(e,t){return r+=t?e.match(a)?e+"\n":"r.push("+e+");\n":""!=e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",i};o=n.exec(e);)i(e.slice(l,o.index))(o[1],!0),l=o.index+o[0].length;return i(e.substr(l,e.length-l)),r+='return r.join("");',new Function(r.replace(/[\r\t\n]/g,"")).apply(t)})(l,r)),$("#confirmDailog-"+r.id).modal("show"),!1},window.rename=function(e,t){t&&($("#js-rename-from").val(t),$("#js-rename-to").val(t),$("#renameDailog").modal("show"))},window.toast=c,window.backup=function(e,t){const o=new XMLHttpRequest,n="path="+e+"&file="+t+"&token="+WPMastertoolkit_FileManager.nonce+"&type=backup&ajax=true";return o.open("POST","",!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4==o.readyState&&200==o.status&&c(o.responseText)},o.send(n),!1}}))}();